import streamlit as st

st.set_page_config(page_title="나와 어울리는 책은?", page_icon="📚", layout="centered")

st.title("📚 나와 어울리는 책은?")
st.write("간단한 7문항 심리테스트로 당신의 독서 성향을 분석하고, 어울리는 책을 추천해드릴게요. "
         "각 문항에서 가장 가까운 선택지를 골라주세요!")

# 공통 선택지(항상 A~E가 같은 장르로 매핑되도록 유지)
options = [
    "A. 실용·성장 중심(자기계발)",
    "B. 의미·통찰 중심(인문/철학)",
    "C. 원리·정보 중심(과학/IT)",
    "D. 맥락·구조 중심(역사/사회)",
    "E. 이야기·몰입 중심(소설)",
]

questions = [
    "1) 새로운 주제를 배울 때 내가 가장 흥미를 느끼는 방식은?",
    "2) 시간이 생겼을 때 내가 가장 자주 선택하는 활동은?",
    "3) 친구가 “요즘 좀 힘들다”고 말하면 나는 보통…",
    "4) 내가 책을 읽는 가장 큰 목적은?",
    "5) 다음 중 가장 끌리는 콘텐츠는?",
    "6) 어떤 책이 “좋은 책”이라고 느껴지는가?",
    "7) 내가 가장 궁금해하는 질문은 어떤 유형인가?",
]

# 질문별 보기(각 질문은 실제 문장으로)
question_choices = [
    [
        "A. 실생활에 적용할 수 있는 방법을 찾는다",
        "B. 그 주제가 삶에 어떤 의미가 있는지 생각한다",
        "C. 원리나 구조를 분석하며 이해한다",
        "D. 사회나 시대적 배경 속에서 바라본다",
        "E. 이야기나 사례를 통해 자연스럽게 몰입한다",
    ],
    [
        "A. 목표를 세우거나 자기관리 루틴을 만든다",
        "B. 깊이 있는 질문을 던지는 글을 읽는다",
        "C. 새로운 기술이나 최신 정보를 찾아본다",
        "D. 사회 이슈나 역사적 사건을 탐구한다",
        "E. 재미있는 스토리 콘텐츠를 즐긴다",
    ],
    [
        "A. 현실적인 해결책과 조언을 정리해준다",
        "B. 감정과 상황의 의미를 함께 고민한다",
        "C. 문제의 원인을 논리적으로 분석한다",
        "D. 비슷한 사회적 사례나 배경을 떠올린다",
        "E. 공감하며 이야기를 들어주는 편이다",
    ],
    [
        "A. 성장하거나 더 나은 사람이 되기 위해",
        "B. 인간과 삶을 깊이 이해하기 위해",
        "C. 새로운 지식과 정보를 얻기 위해",
        "D. 세상과 사회 구조를 이해하기 위해",
        "E. 다른 세계를 경험하고 몰입하기 위해",
    ],
    [
        "A. 성공 습관, 생산성, 동기부여 콘텐츠",
        "B. 철학적 질문이나 인문학적 에세이",
        "C. 과학·기술·미래를 다루는 영상이나 글",
        "D. 사회 문제나 역사적 흐름을 다룬 다큐",
        "E. 감정선이 강한 드라마나 소설 이야기",
    ],
    [
        "A. 읽고 나서 행동이 바뀌는 책",
        "B. 사고의 폭이 넓어지는 책",
        "C. 새로운 사실을 배우게 되는 책",
        "D. 세상을 바라보는 시야가 넓어지는 책",
        "E. 재미있고 몰입감이 뛰어난 책",
    ],
    [
        "A. “어떻게 하면 더 나은 삶을 살 수 있을까?”",
        "B. “인간은 왜 이런 선택을 할까?”",
        "C. “미래에는 어떤 기술이 세상을 바꿀까?”",
        "D. “사회는 왜 이렇게 변화해왔을까?”",
        "E. “만약 다른 삶을 산다면 어떤 이야기가 펼쳐질까?”",
    ],
]

st.divider()
st.subheader("📝 질문에 답해주세요")

answers = []
for i, q in enumerate(questions):
    st.markdown(f"**{q}**")
    ans = st.radio(
        label=f"q{i+1}",
        options=question_choices[i],
        index=None,  # 기본 선택 없음
        label_visibility="collapsed"
    )
    answers.append(ans)
    st.write("")  # spacing

st.divider()

# 결과 보기 버튼
clicked = st.button("결과 보기", type="primary")

if clicked:
    # 모두 응답했는지 확인
    if any(a is None for a in answers):
        st.warning("모든 질문에 답변해 주세요!")
    else:
        st.info("분석 중...")
